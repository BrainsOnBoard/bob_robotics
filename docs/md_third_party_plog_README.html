<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BoB robotics: Plog - portable, simple and extensible C++ logging library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bob_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BoB robotics
   </div>
   <div id="projectbrief">The Brains on Board robotics library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_third_party_plog_README.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Plog - portable, simple and extensible C++ logging library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Pretty powerful logging library in about 1000 lines of code <a href="https://travis-ci.org/SergiusTheBest/plog"><img src="https://travis-ci.org/SergiusTheBest/plog.svg?branch=master" alt="Build Status" class="inline"/>
</a> <a href="https://ci.appveyor.com/project/SergiusTheBest/plog/branch/master"><img src="https://ci.appveyor.com/api/projects/status/rna5gwhqjb13wovr/branch/master?svg=true" alt="Build status" class="inline"/>
</a> <a href="https://circleci.com/gh/SergiusTheBest/plog"><img src="https://circleci.com/gh/SergiusTheBest/plog.svg?style=svg" alt="CircleCI" class="inline"/>
</a></p>
<ul>
<li><a href="#introduction">Introduction</a><ul>
<li><a href="#hello-log">Hello log!</a></li>
<li><a href="#features">Features</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#step-1-adding-includes">Step 1: Adding includes</a></li>
<li><a href="#step-2-initialization">Step 2: Initialization</a></li>
<li><a href="#step-3-logging">Step 3: Logging</a><ul>
<li><a href="#basic-logging-macros">Basic logging macros</a></li>
<li><a href="#conditional-logging-macros">Conditional logging macros</a></li>
<li><a href="#logger-severity-checker">Logger severity checker</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#advanced-usage">Advanced usage</a><ul>
<li><a href="#changing-severity-at-runtime">Changing severity at runtime</a></li>
<li><a href="#custom-initialization">Custom initialization</a></li>
<li><a href="#multiple-appenders">Multiple appenders</a></li>
<li><a href="#multiple-loggers">Multiple loggers</a></li>
<li><a href="#chained-loggers">Chained loggers</a></li>
</ul>
</li>
<li><a href="#architecture">Architecture</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#logger">Logger</a></li>
<li><a href="#record">Record</a></li>
<li><a href="#formatter">Formatter</a><ul>
<li><a href="#txtformatter">TxtFormatter</a></li>
<li><a href="#csvformatter">CsvFormatter</a></li>
<li><a href="#funcmessageformatter">FuncMessageFormatter</a></li>
<li><a href="#messageonlyformatter">MessageOnlyFormatter</a></li>
</ul>
</li>
<li><a href="#converter">Converter</a><ul>
<li><a href="#utf8converter">UTF8Converter</a></li>
<li><a href="#nativeeolconverter">NativeEOLConverter</a></li>
</ul>
</li>
<li><a href="#appender">Appender</a><ul>
<li><a href="#rollingfileappender">RollingFileAppender</a></li>
<li><a href="#consoleappender">ConsoleAppender</a></li>
<li><a href="#colorconsoleappender">ColorConsoleAppender</a></li>
<li><a href="#androidappender">AndroidAppender</a></li>
<li><a href="#eventlogappender">EventLogAppender</a></li>
<li><a href="#debugoutputappender">DebugOutputAppender</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#miscellaneous-notes">Miscellaneous notes</a><ul>
<li><a href="#lazy-stream-evaluation">Lazy stream evaluation</a></li>
<li><a href="#stream-improvements-over-stdostream">Stream improvements over std::ostream</a></li>
<li><a href="#automatic-this-pointer-capture">Automatic 'this' pointer capture</a></li>
<li><a href="#headers-to-include">Headers to include</a></li>
<li><a href="#unicode">Unicode</a></li>
<li><a href="#wide-string-support">Wide string support</a></li>
<li><a href="#performance">Performance</a></li>
<li><a href="#printf-style-formatting">Printf style formatting</a></li>
</ul>
</li>
<li><a href="#extending">Extending</a><ul>
<li><a href="#custom-data-type">Custom data type</a></li>
<li><a href="#custom-appender">Custom appender</a></li>
<li><a href="#custom-formatter">Custom formatter</a></li>
<li><a href="#custom-converter">Custom converter</a></li>
</ul>
</li>
<li><a href="#samples">Samples</a></li>
<li><a href="#references">References</a><ul>
<li><a href="#competing-c-log-libraries">Competing C++ log libraries</a></li>
<li><a href="#tools-and-useful-info">Tools and useful info</a></li>
</ul>
</li>
<li><a href="#license">License</a></li>
<li><a href="#version-history">Version history</a></li>
</ul>
<h1>Introduction</h1>
<h2>Hello log!</h2>
<p>Plog is a C++ logging library that is designed to be as simple, small and flexible as possible. It is created as an alternative to existing large libraries and provides some unique features as <a href="(#csvformatter)">CSV log format</a> and <a href="#automatic-this-pointer-capture">automatic 'this' pointer capture</a>.</p>
<p>Here is a minimal hello log sample:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;plog/Log.h&gt;</span> <span class="comment">// Step1: include the header.</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    plog::init(plog::debug, <span class="stringliteral">&quot;Hello.txt&quot;</span>); <span class="comment">// Step2: initialize the logger.</span></div><div class="line"></div><div class="line">    <span class="comment">// Step3: write log messages using a special macro. </span></div><div class="line">    <span class="comment">// There are several log macros, use the macro you liked the most.</span></div><div class="line"></div><div class="line">    LOGD &lt;&lt; <span class="stringliteral">&quot;Hello log!&quot;</span>; <span class="comment">// short macro</span></div><div class="line">    LOG_DEBUG &lt;&lt; <span class="stringliteral">&quot;Hello log!&quot;</span>; <span class="comment">// long macro</span></div><div class="line">    LOG(plog::debug) &lt;&lt; <span class="stringliteral">&quot;Hello log!&quot;</span>; <span class="comment">// function-style macro</span></div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>And its output:</p>
<div class="fragment"><div class="line">2015-05-18 23:12:43.921 DEBUG [21428] [main@13] Hello log!</div><div class="line">2015-05-18 23:12:43.968 DEBUG [21428] [main@14] Hello log!</div><div class="line">2015-05-18 23:12:43.968 DEBUG [21428] [main@15] Hello log!</div></div><!-- fragment --><h2>Features</h2>
<ul>
<li>Very small (slightly more than 1000 LOC)</li>
<li>Easy to use</li>
<li>Headers only</li>
<li>No 3rd-party dependencies</li>
<li>Cross-platform: Windows, Linux, FreeBSD, macOS, Android, RTEMS (gcc, clang, msvc, mingw, mingw-w64, icc, c++builder)</li>
<li>Thread and type safe</li>
<li>Formatters: <a href="#txtformatter">TXT</a>, <a href="#csvformatter">CSV</a>, <a href="#funcmessageformatter">FuncMessage</a></li>
<li>Appenders: <a href="#rollingfileappender">RollingFile</a>, <a href="#consoleappender">Console</a>, <a href="#colorconsoleappender">ColorConsole</a>, <a href="#androidappender">Android</a>, <a href="#eventlogappender">EventLog</a>, <a href="#debugoutputappender">DebugOutput</a></li>
<li><a href="#automatic-this-pointer-capture">Automatic 'this' pointer capture</a> (supported only on msvc)</li>
<li><a href="#lazy-stream-evaluation">Lazy stream evaluation</a></li>
<li><a href="#unicode">Unicode aware</a>, files are stored in UTF8</li>
<li>Doesn't require C++11</li>
<li><a href="#extending">Extendable</a></li>
<li>No <code>windows.h</code> dependency</li>
</ul>
<h1>Usage</h1>
<p>To start using plog you need to make 3 simple steps.</p>
<h2>Step 1: Adding includes</h2>
<p>At first your project needs to know about plog. For that you have to:</p>
<ol type="1">
<li>Add <code>plog/include</code> to the project include paths</li>
<li>Add <code>#include &lt;plog/Log.h&gt;</code> into your cpp/h files (if you have precompiled headers it is a good place to add this include there)</li>
</ol>
<h2>Step 2: Initialization</h2>
<p>The next step is to initialize the <a href="#logger">Logger</a>. This is done by the following <code>plog::init</code> function:</p>
<div class="fragment"><div class="line">Logger&amp; init(Severity maxSeverity, <span class="keyword">const</span> <span class="keywordtype">char</span>/<span class="keywordtype">wchar_t</span>* fileName, <span class="keywordtype">size_t</span> maxFileSize = 0, <span class="keywordtype">int</span> maxFiles = 0);</div></div><!-- fragment --><p><code>maxSeverity</code> is the logger severity upper limit. All log messages have its own severity and if it is higher than the limit those messages are dropped. Plog defines the following severity levels:</p>
<div class="fragment"><div class="line"><span class="keyword">enum</span> Severity</div><div class="line">{</div><div class="line">    none = 0,</div><div class="line">    fatal = 1,</div><div class="line">    error = 2,</div><div class="line">    warning = 3,</div><div class="line">    info = 4,</div><div class="line">    debug = 5,</div><div class="line">    verbose = 6</div><div class="line">};</div></div><!-- fragment --><p><em>Note: messages with severity level <code>none</code> will be always printed.</em></p>
<p>The log format is determined automatically by <code>fileName</code> file extension:</p>
<ul>
<li>.csv =&gt; <a href="#csvformatter">CSV format</a></li>
<li>anyting else =&gt; <a href="#txtformatter">TXT format</a></li>
</ul>
<p>The rolling behavior is controlled by <code>maxFileSize</code> and <code>maxFiles</code> parameters:</p>
<ul>
<li><code>maxFileSize</code> - the maximum log file size in bytes</li>
<li><code>maxFiles</code> - a number of log files to keep</li>
</ul>
<p>If one of them is zero then log rolling is disabled.</p>
<p>Sample:</p>
<div class="fragment"><div class="line">plog::init(plog::warning, <span class="stringliteral">&quot;c:\\logs\\log.csv&quot;</span>, 1000000, 5); </div></div><!-- fragment --><p>Here the logger is initialized to write all messages with up to warning severity to a file in csv format. Maximum log file size is set to 1'000'000 bytes and 5 log files are kept.</p>
<p><em>Note: see <a href="#custom-initialization">Custom initialization</a> for advanced usage.</em></p>
<h2>Step 3: Logging</h2>
<p>Logging is performed with the help of special macros. A log message is constructed using stream output operators <code>&lt;&lt;</code>. Thus it is type-safe and extendable in contrast to a format string output.</p>
<h3>Basic logging macros</h3>
<p>This is the most used type of logging macros. They do unconditional logging.</p>
<h4>Long macros:</h4>
<div class="fragment"><div class="line">LOG_VERBOSE &lt;&lt; <span class="stringliteral">&quot;verbose&quot;</span>;</div><div class="line">LOG_DEBUG &lt;&lt; <span class="stringliteral">&quot;debug&quot;</span>;</div><div class="line">LOG_INFO &lt;&lt; <span class="stringliteral">&quot;info&quot;</span>;</div><div class="line">LOG_WARNING &lt;&lt; <span class="stringliteral">&quot;warning&quot;</span>;</div><div class="line">LOG_ERROR &lt;&lt; <span class="stringliteral">&quot;error&quot;</span>;</div><div class="line">LOG_FATAL &lt;&lt; <span class="stringliteral">&quot;fatal&quot;</span>;</div><div class="line">LOG_NONE &lt;&lt; <span class="stringliteral">&quot;none&quot;</span>;</div></div><!-- fragment --><h4>Short macros:</h4>
<div class="fragment"><div class="line">LOGV &lt;&lt; <span class="stringliteral">&quot;verbose&quot;</span>;</div><div class="line">LOGD &lt;&lt; <span class="stringliteral">&quot;debug&quot;</span>;</div><div class="line">LOGI &lt;&lt; <span class="stringliteral">&quot;info&quot;</span>;</div><div class="line">LOGW &lt;&lt; <span class="stringliteral">&quot;warning&quot;</span>;</div><div class="line">LOGE &lt;&lt; <span class="stringliteral">&quot;error&quot;</span>;</div><div class="line">LOGF &lt;&lt; <span class="stringliteral">&quot;fatal&quot;</span>;</div><div class="line">LOGN &lt;&lt; <span class="stringliteral">&quot;none&quot;</span>;</div></div><!-- fragment --><h4>Function-style macros:</h4>
<div class="fragment"><div class="line">LOG(severity) &lt;&lt; <span class="stringliteral">&quot;msg&quot;</span>;</div></div><!-- fragment --><h3>Conditional logging macros</h3>
<p>These macros are used to do a conditional logging. They accept a condition as a parameter and perform logging if the condition is true.</p>
<h4>Long macros:</h4>
<div class="fragment"><div class="line">LOG_VERBOSE_IF(cond) &lt;&lt; <span class="stringliteral">&quot;verbose&quot;</span>;</div><div class="line">LOG_DEBUG_IF(cond) &lt;&lt; <span class="stringliteral">&quot;debug&quot;</span>;</div><div class="line">LOG_INFO_IF(cond) &lt;&lt; <span class="stringliteral">&quot;info&quot;</span>;</div><div class="line">LOG_WARNING_IF(cond) &lt;&lt; <span class="stringliteral">&quot;warning&quot;</span>;</div><div class="line">LOG_ERROR_IF(cond) &lt;&lt; <span class="stringliteral">&quot;error&quot;</span>;</div><div class="line">LOG_FATAL_IF(cond) &lt;&lt; <span class="stringliteral">&quot;fatal&quot;</span>;</div><div class="line">LOG_NONE_IF(cond) &lt;&lt; <span class="stringliteral">&quot;none&quot;</span>;</div></div><!-- fragment --><h4>Short macros:</h4>
<div class="fragment"><div class="line">LOGV_IF(cond) &lt;&lt; <span class="stringliteral">&quot;verbose&quot;</span>;</div><div class="line">LOGD_IF(cond) &lt;&lt; <span class="stringliteral">&quot;debug&quot;</span>;</div><div class="line">LOGI_IF(cond) &lt;&lt; <span class="stringliteral">&quot;info&quot;</span>;</div><div class="line">LOGW_IF(cond) &lt;&lt; <span class="stringliteral">&quot;warning&quot;</span>;</div><div class="line">LOGE_IF(cond) &lt;&lt; <span class="stringliteral">&quot;error&quot;</span>;</div><div class="line">LOGF_IF(cond) &lt;&lt; <span class="stringliteral">&quot;fatal&quot;</span>;</div><div class="line">LOGN_IF(cond) &lt;&lt; <span class="stringliteral">&quot;none&quot;</span>;</div></div><!-- fragment --><h4>Function-style macros:</h4>
<div class="fragment"><div class="line">LOG_IF(severity, cond) &lt;&lt; <span class="stringliteral">&quot;msg&quot;</span>;</div></div><!-- fragment --><h3>Logger severity checker</h3>
<p>In some cases there is a need to perform a group of actions depending on the current logger severity level. There is a special macro for that. It helps to minimize performance penalty when the logger is inactive.</p>
<div class="fragment"><div class="line">IF_LOG(severity)</div></div><!-- fragment --><p>Sample:</p>
<div class="fragment"><div class="line">IF_LOG(plog::debug) <span class="comment">// we want to execute the following statements only at debug severity (and higher)</span></div><div class="line">{</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; vec.size(); ++i)</div><div class="line">    {</div><div class="line">        LOGD &lt;&lt; <span class="stringliteral">&quot;vec[&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; vec[i];</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h1>Advanced usage</h1>
<h2>Changing severity at runtime</h2>
<p>It is possible to set the maximum severity not only at the logger initialization time but at any time later. There are special accessor methods:</p>
<div class="fragment"><div class="line">Severity Logger::getMaxSeverity() <span class="keyword">const</span>;</div><div class="line">Logger::setMaxSeverity(Severity severity);</div></div><!-- fragment --><p>To get the logger use <code>plog::get</code> function:</p>
<div class="fragment"><div class="line">Logger* get();</div></div><!-- fragment --><p>Sample:</p>
<div class="fragment"><div class="line">plog::get()-&gt;setMaxSeverity(plog::debug);</div></div><!-- fragment --><h2>Custom initialization</h2>
<p>Non-typical log cases require the use of custom initialization. It is done by the following <code>plog::init</code> function:</p>
<div class="fragment"><div class="line">Logger&amp; init(Severity maxSeverity = none, IAppender* appender = NULL);</div></div><!-- fragment --><p>You have to construct an <a href="#appender">Appender</a> parameterized with a <a href="#formatter">Formatter</a> and pass it to the <code>plog::init</code> function.</p>
<p><em>Note: a lifetime of the appender should be static!</em></p>
<p>Sample:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="classplog_1_1ConsoleAppender.html">plog::ConsoleAppender&lt;plog::TxtFormatter&gt;</a> consoleAppender;</div><div class="line">plog::init(plog::debug, &amp;consoleAppender);</div></div><!-- fragment --><h2>Multiple appenders</h2>
<p>It is possible to have multiple <a href="#appender">Appenders</a> within a single <a href="#logger">Logger</a>. In such case log message will be written to all of them. Use the following method to accomplish that:</p>
<div class="fragment"><div class="line">Logger&amp; Logger::addAppender(IAppender* appender);</div></div><!-- fragment --><p>Sample:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="classplog_1_1RollingFileAppender.html">plog::RollingFileAppender&lt;plog::CsvFormatter&gt;</a> fileAppender(<span class="stringliteral">&quot;MultiAppender.csv&quot;</span>, 8000, 3); <span class="comment">// Create the 1st appender.</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="classplog_1_1ConsoleAppender.html">plog::ConsoleAppender&lt;plog::TxtFormatter&gt;</a> consoleAppender; <span class="comment">// Create the 2nd appender.</span></div><div class="line">plog::init(plog::debug, &amp;fileAppender).addAppender(&amp;consoleAppender); <span class="comment">// Initialize the logger with the both appenders.</span></div></div><!-- fragment --><p>Here the logger is initialized in the way when log messages are written to both a file and a console.</p>
<p><em>Refer to <a href="samples/MultiAppender">MultiAppender</a> for a complete sample.</em></p>
<h2>Multiple loggers</h2>
<p>Multiple <a href="#logger">Loggers</a> can be used simultaneously each with their own separate configuration. The <a href="#logger">Loggers</a> differ by their instance number (that is implemented as a template parameter). The default instance is zero. Initialization is done by the appropriate template <code>plog::init</code> functions:</p>
<div class="fragment"><div class="line">Logger&lt;instance&gt;&amp; init&lt;instance&gt;(...);</div></div><!-- fragment --><p>To get a logger use <code>plog::get</code> function (returns <code>NULL</code> if the logger is not initialized):</p>
<div class="fragment"><div class="line">Logger&lt;instance&gt;* get&lt;instance&gt;();</div></div><!-- fragment --><p>All logging macros have their special versions that accept an instance parameter. These kind of macros have an underscore at the end:</p>
<div class="fragment"><div class="line">LOGD_(instance) &lt;&lt; <span class="stringliteral">&quot;debug&quot;</span>;</div><div class="line">LOGD_IF_(instance, condition) &lt;&lt; <span class="stringliteral">&quot;conditional debug&quot;</span>;</div><div class="line">IF_LOG_(instance, severity)</div></div><!-- fragment --><p>Sample:</p>
<div class="fragment"><div class="line"><span class="keyword">enum</span> <span class="comment">// Define log instances. Default is 0 and is omitted from this enum.</span></div><div class="line">{</div><div class="line">    SecondLog = 1</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    plog::init(plog::debug, <span class="stringliteral">&quot;MultiInstance-default.txt&quot;</span>); <span class="comment">// Initialize the default logger instance.</span></div><div class="line">    plog::init&lt;SecondLog&gt;(plog::debug, <span class="stringliteral">&quot;MultiInstance-second.txt&quot;</span>); <span class="comment">// Initialize the 2nd logger instance.</span></div><div class="line"></div><div class="line">    <span class="comment">// Write some messages to the default log.</span></div><div class="line">    LOGD &lt;&lt; <span class="stringliteral">&quot;Hello default log!&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Write some messages to the 2nd log.</span></div><div class="line">    LOGD_(SecondLog) &lt;&lt; <span class="stringliteral">&quot;Hello second log!&quot;</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p><em>Refer to <a href="samples/MultiInstance">MultiInstance</a> for a complete sample.</em></p>
<h2>Chained loggers</h2>
<p>A <a href="#logger">Logger</a> can work as an <a href="#appender">Appender</a> for another <a href="#logger">Logger</a>. So you can chain several loggers together. This is useful for streaming log messages from a shared library to the main application binary.</p>
<p>Sample:</p>
<div class="fragment"><div class="line"><span class="comment">// shared library</span></div><div class="line"></div><div class="line"><span class="comment">// Function that initializes the logger in the shared library. </span></div><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> EXPORT initialize(plog::Severity severity, <a class="code" href="classplog_1_1IAppender.html">plog::IAppender</a>* appender)</div><div class="line">{</div><div class="line">    plog::init(severity, appender); <span class="comment">// Initialize the shared library logger.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Function that produces a log message.</span></div><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> EXPORT foo()</div><div class="line">{</div><div class="line">    LOGI &lt;&lt; <span class="stringliteral">&quot;Hello from shared lib!&quot;</span>;</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// main app</span></div><div class="line"></div><div class="line"><span class="comment">// Functions imported form the shared library.</span></div><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> initialize(plog::Severity severity, <a class="code" href="classplog_1_1IAppender.html">plog::IAppender</a>* appender);</div><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> foo();</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    plog::init(plog::debug, <span class="stringliteral">&quot;ChainedApp.txt&quot;</span>); <span class="comment">// Initialize the main logger.</span></div><div class="line"></div><div class="line">    LOGD &lt;&lt; <span class="stringliteral">&quot;Hello from app!&quot;</span>; <span class="comment">// Write a log message.</span></div><div class="line"></div><div class="line">    initialize(plog::debug, plog::get()); <span class="comment">// Initialize the logger in the shared library. Note that it has its own severity.</span></div><div class="line">    foo(); <span class="comment">// Call a function from the shared library that produces a log message.</span></div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p><em>Refer to <a href="samples/Chained">Chained</a> for a complete sample.</em></p>
<h1>Architecture</h1>
<h2>Overview</h2>
<p>Plog is designed to be small but flexible, so it prefers templates to interface inheritance. All main entities are shown on the following UML diagram:</p>
<p>![Plog class diagram](<a href="http://gravizo.com/svg?@startuml">http://gravizo.com/svg?@startuml</a> ;class%20Logger&lt;int%20instance&gt;%20&lt;&lt;singleton&gt;&gt;%20{;%20%20%20%20+addAppender%28%29;%20%20%20%20+getMaxSeverity%28%29;%20%20%20%20+setMaxSeverity%28%29;%20%20%20%20+checkSeverity%28%29;%20%20%20%20-maxSeverity;%20%20%20%20-appenders;};package%20Appenders%20&lt;&lt;Frame&gt;&gt;%20{;%20%20%20%20interface%20IAppender%20{;%20%20%20%20%20%20%20%20+write%28%29;%20%20%20%20};%20%20%20%20;%20%20%20%20class%20RollingFileAppender&lt;Formatter,%20Converter&gt;;%20%20%20%20class%20ConsoleAppender&lt;Formatter&gt;;%20%20%20%20class%20ColorConsoleAppender&lt;Formatter&gt;;%20%20%20%20class%20AndroidAppender&lt;Formatter&gt;;%20%20%20%20class%20EventLogAppender&lt;Formatter&gt;;%20%20%20%20class%20DebugOutputAppender&lt;Formatter&gt;;%20%20%20%20ConsoleAppender%20&lt;|--%20ColorConsoleAppender;%20%20%20%20IAppender%20&lt;|-u-%20Logger;%20%20%20%20IAppender%20&lt;|--%20RollingFileAppender;%20%20%20%20IAppender%20&lt;|--%20ConsoleAppender;%20%20%20%20IAppender%20&lt;|--%20AndroidAppender;%20%20%20%20IAppender%20&lt;|--%20EventLogAppender;%20%20%20%20IAppender%20&lt;|--%20DebugOutputAppender;%20%20%20%20;%20%20%20%20Logger%20"1"%20o--%20"0..n"%20IAppender;};package%20Formatters%20&lt;&lt;Frame&gt;&gt;%20{;%20%20%20%20class%20CsvFormatter%20{;%20%20%20%20%20%20%20%20{static}%20header%28%29;%20%20%20%20%20%20%20%20{static}%20format%28%29;%20%20%20%20};%20%20%20%20class%20TxtFormatter%20{;%20%20%20%20%20%20%20%20{static}%20header%28%29;%20%20%20%20%20%20%20%20{static}%20format%28%29;%20%20%20%20};%20%20%20%20class%20FuncMessageFormatter%20{;%20%20%20%20%20%20%20%20{static}%20header%28%29;%20%20%20%20%20%20%20%20{static}%20format%28%29;%20%20%20%20};%20%20%20%20class%20MessageOnlyFormatter%20{;%20%20%20%20%20%20%20%20{static}%20header%28%29;%20%20%20%20%20%20%20%20{static}%20format%28%29;%20%20%20%20};};package%20Converters%20&lt;&lt;Frame&gt;&gt;%20{;%20%20%20%20class%20UTF8Converter%20{;%20%20%20%20%20%20%20%20{static}%20header%28%29;%20%20%20%20%20%20%20%20{static}%20convert%28%29;%20%20%20%20};%20%20%20%20class%20NativeEOLConverter%20&lt;NextConverter&gt;{;%20%20%20%20%20%20%20%20{static}%20header%28%29;%20%20%20%20%20%20%20%20{static}%20convert%28%29;%20%20%20%20};};enum%20Severity%20{;%20%20%20%20none,;%20%20%20%20fatal,;%20%20%20%20error,;%20%20%20%20warning,;%20%20%20%20info,;%20%20%20%20debug,;%20%20%20%20verbose;};class%20Record%20{;%20%20%20%20+operator&lt;&lt;%28%29;%20%20%20%20-time;%20%20%20%20-severity;%20%20%20%20-tid;%20%20%20%20-object;%20%20%20%20-line;%20%20%20%20-file;%20%20%20%20-message;%20%20%20%20-func;};hide%20empty%20members;hide%20empty%20fields;)</p>
<p>There are 5 functional parts:</p>
<ul>
<li><a href="#logger">Logger</a> - the main object, implemented as singleton</li>
<li><a href="#record">Record</a> - keeps log data: time, message, etc</li>
<li><a href="#appender">Appender</a> - represents a log data destination: file, console, etc</li>
<li><a href="#formatter">Formatter</a> - formats log data into a string</li>
<li><a href="#converter">Converter</a> - converts formatter output into a raw buffer</li>
</ul>
<p>The log data flow is shown below:</p>
<p>![Log data flow](<a href="http://gravizo.com/g?@startuml">http://gravizo.com/g?@startuml</a> ;%28*%29%20-r-&gt;%20"LOG%20macro";-r-&gt;%20"Record";-r-&gt;%20"Logger";-r--&gt;%20"Appender";-d-&gt;%20"Formatter";-d-&gt;%20"Converter";-u-&gt;%20"Appender";-r-&gt;%20%28*%29;)</p>
<h2>Logger</h2>
<p><a href="#logger">Logger</a> is a center object of the whole logging system. It is a singleton and thus it forms a known single entry point for configuration and processing log data. <a href="#logger">Logger</a> can act as <a href="#appender">Appender</a> for another <a href="#logger">Logger</a> because it implements <code>IAppender</code> interface. Also there can be several independent loggers that are parameterized by an integer instance number. The default instance is 0.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keywordtype">int</span> instance&gt;</div><div class="line"><span class="keyword">class </span>Logger : <span class="keyword">public</span> util::Singleton&lt;Logger&lt;instance&gt; &gt;, <span class="keyword">public</span> IAppender</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Logger(Severity maxSeverity = none);</div><div class="line">    </div><div class="line">    Logger&amp; addAppender(IAppender* appender);</div><div class="line">    </div><div class="line">    Severity getMaxSeverity() <span class="keyword">const</span>;</div><div class="line">    <span class="keywordtype">void</span> setMaxSeverity(Severity severity);</div><div class="line">    <span class="keywordtype">bool</span> checkSeverity(Severity severity) <span class="keyword">const</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> write(<span class="keyword">const</span> Record&amp; record);</div><div class="line">    <span class="keywordtype">void</span> operator+=(<span class="keyword">const</span> Record&amp; record);</div><div class="line">};</div></div><!-- fragment --><h2>Record</h2>
<p><a href="#record">Record</a> stores all log data. It includes:</p>
<ul>
<li>time</li>
<li>severity</li>
<li>thread id</li>
<li>'this' pointer (if a log message is written from within an object)</li>
<li>source line</li>
<li>source file name</li>
<li>function name</li>
<li>message</li>
</ul>
<p><em>Note: Source file name isn't captured by default. To enable it define PLOG_CAPTURE_FILE.</em></p>
<p>Also <a href="#record">Record</a> has a number of overloaded stream output operators to construct a message.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Record</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Record(Severity severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* func, <span class="keywordtype">size_t</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span>* file, <span class="keyword">const</span> <span class="keywordtype">void</span>* <span class="keywordtype">object</span>);</div><div class="line">    </div><div class="line">    <span class="comment">// Stream output operators</span></div><div class="line">        </div><div class="line">    Record&amp; operator&lt;&lt;(<span class="keywordtype">char</span> data);</div><div class="line">    Record&amp; operator&lt;&lt;(<span class="keywordtype">wchar_t</span> data);</div><div class="line">    </div><div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line">    Record&amp; operator&lt;&lt;(<span class="keyword">const</span> T&amp; data);</div><div class="line">    </div><div class="line">    <span class="comment">// Getters</span></div><div class="line">    </div><div class="line">    <span class="keyword">virtual</span> <span class="keyword">const</span> util::Time&amp; getTime() <span class="keyword">const</span>;</div><div class="line">    <span class="keyword">virtual</span> Severity getSeverity() <span class="keyword">const</span>;</div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> getTid() <span class="keyword">const</span>;</div><div class="line">    <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* getObject() <span class="keyword">const</span>;</div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> getLine() <span class="keyword">const</span>;</div><div class="line">    <span class="keyword">virtual</span> <span class="keyword">const</span> util::nchar* getMessage() const</div><div class="line">    virtual const <span class="keywordtype">char</span>* getFunc() const</div><div class="line">    virtual const <span class="keywordtype">char</span>* getFile() const</div><div class="line">};</div></div><!-- fragment --><p><em>See <a href="#stream-improvements-over-stdostream">Stream improvements over std::ostream</a>.</em></p>
<p><em>Refer to <a href="samples/Demo">Demo</a> sample to see what can be written to the log stream.</em></p>
<h2>Formatter</h2>
<p><a href="#formatter">Formatter</a> is responsible for formatting log data from <a href="#record">Record</a> into various string representations (binary forms can be used too). There is no base class for formatters, they are implemented as classes with static functions <code>format</code> and <code>header</code>:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Formatter</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">static</span> util::nstring header();</div><div class="line">    <span class="keyword">static</span> util::nstring format(<span class="keyword">const</span> Record&amp; record);</div><div class="line">};</div></div><!-- fragment --><p><em>See <a href="#custom-formatter">How to implement a custom formatter</a>.</em></p>
<h3>TxtFormatter</h3>
<p>This is a classic log format available in almost any log library. It is good for console output and it is easy to read without any tools.</p>
<div class="fragment"><div class="line">2014-11-11 00:29:06.245 FATAL [4460] [main@22] fatal</div><div class="line">2014-11-11 00:29:06.261 ERROR [4460] [main@23] error</div><div class="line">2014-11-11 00:29:06.261 INFO  [4460] [main@24] info</div><div class="line">2014-11-11 00:29:06.261 WARN  [4460] [main@25] warning</div><div class="line">2014-11-11 00:29:06.261 DEBUG [4460] [main@26] debug</div><div class="line">2014-11-11 00:29:06.261 INFO  [4460] [main@32] This is a message with &quot;quotes&quot;!</div><div class="line">2014-11-11 00:29:06.261 DEBUG [4460] [Object::Object@8] </div><div class="line">2014-11-11 00:29:06.261 DEBUG [4460] [Object::~Object@13] </div></div><!-- fragment --><h3>CsvFormatter</h3>
<p>This is the most powerful log format. It can be easily read without any tools (but slighlty harder than <a href="#txtformatter">TXT format</a>) and can be heavily analyzed if it is opened with a CSV-aware tool (like Excel). One rows can be highlighted according to their cell values, another rows can be hidden, columns can be manipulated and you can even run SQL queries on log data! This is a recommended format if logs are big and require heavy analysis. Also 'this' pointer is shown so object instances can be told apart.</p>
<div class="fragment"><div class="line">Date;Time;Severity;TID;This;Function;Message</div><div class="line">2014/11/14;15:22:25.033;FATAL;4188;00000000;main@22;&quot;fatal&quot;</div><div class="line">2014/11/14;15:22:25.033;ERROR;4188;00000000;main@23;&quot;error&quot;</div><div class="line">2014/11/14;15:22:25.033;INFO;4188;00000000;main@24;&quot;info&quot;</div><div class="line">2014/11/14;15:22:25.033;WARN;4188;00000000;main@25;&quot;warning&quot;</div><div class="line">2014/11/14;15:22:25.048;DEBUG;4188;00000000;main@26;&quot;debug&quot;</div><div class="line">2014/11/14;15:22:25.048;INFO;4188;00000000;main@32;&quot;This is a message with &quot;&quot;quotes&quot;&quot;!&quot;</div><div class="line">2014/11/14;15:22:25.048;DEBUG;4188;002EF4E3;Object::Object@8;</div><div class="line">2014/11/14;15:22:25.048;DEBUG;4188;002EF4E3;Object::~Object@13;</div></div><!-- fragment --><p><em>Note: message size is limited to 32000 chars.</em></p>
<h3>FuncMessageFormatter</h3>
<p>This format is designed to be used with appenders that provide their own timestamps (like <a href="#androidappender">AndroidAppender</a> or linux syslog facility).</p>
<div class="fragment"><div class="line">main@22: fatal</div><div class="line">main@23: error</div><div class="line">main@24: info</div><div class="line">main@25: warning</div><div class="line">main@26: debug</div><div class="line">main@32: This is a message with &quot;quotes&quot;!</div><div class="line">Object::Object@8: </div><div class="line">Object::~Object@13: </div></div><!-- fragment --><h3>MessageOnlyFormatter</h3>
<p>Use this formatter when you're interested only in a log message.</p>
<div class="fragment"><div class="line">fatal</div><div class="line">error</div><div class="line">info</div><div class="line">warning</div><div class="line">debug</div><div class="line">This is a message with &quot;quotes&quot;!</div></div><!-- fragment --><h2>Converter</h2>
<p><a href="#converter">Converter</a> is responsible for conversion of <a href="#formatter">Formatter</a> output data to a raw buffer (represented as <code>std::string</code>). It is used by <a href="#rollingfileappender">RollingFileAppender</a> to perform a conversion before writing to a file. There is no base class for converters, they are implemented as classes with static functions <code>convert</code> and <code>header</code>:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Converter</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">static</span> std::string header(<span class="keyword">const</span> util::nstring&amp; str);</div><div class="line">    <span class="keyword">static</span> std::string convert(<span class="keyword">const</span> util::nstring&amp; str);</div><div class="line">};</div></div><!-- fragment --><p><em>See <a href="#custom-converter">How to implement a custom converter</a>.</em></p>
<h3>UTF8Converter</h3>
<p><a href="#utf8converter">UTF8Converter</a> is a default converter in plog. It converts string data to UTF-8 with BOM.</p>
<h3>NativeEOLConverter</h3>
<p>This converter converts <code>&lt;LF&gt;</code> line endings to <code>&lt;CRLF&gt;</code> on Windows and do nothing on everything else. As a template parameter it accepts another converter that is called next (by default <a href="#utf8converter">UTF8Converter</a>).</p>
<p>Sample:</p>
<div class="fragment"><div class="line"><a class="code" href="classplog_1_1RollingFileAppender.html">plog::RollingFileAppender&lt;plog::TxtFormatter, plog::NativeEOLConverter&lt;&gt;</a> &gt; fileAppender(<span class="stringliteral">&quot;NativeEOL.log&quot;</span>);</div></div><!-- fragment --><p><em>Refer to <a href="samples/NativeEOL">NativeEOL</a> for a complete sample.</em></p>
<h2>Appender</h2>
<p><a href="#appender">Appender</a> uses <a href="#formatter">Formatter</a> and <a href="#converter">Converter</a> to get a desired representation of log data and outputs (appends) it to a file/console/etc. All appenders must implement <code>IAppender</code> interface (the only interface in plog):</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>IAppender</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">virtual</span> ~IAppender();</div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> write(<span class="keyword">const</span> Record&amp; record) = 0;</div><div class="line">};</div></div><!-- fragment --><p><em>See <a href="#custom-appender">How to implement a custom appender</a>.</em></p>
<h3>RollingFileAppender</h3>
<p>This appender outputs log data to a file with rolling behaviour. As template parameters it accepts both <a href="#formatter">Formatter</a> and <a href="#converter">Converter</a>.</p>
<div class="fragment"><div class="line">RollingFileAppender&lt;Formatter, Converter&gt;::RollingFileAppender(<span class="keyword">const</span> util::nchar* fileName, <span class="keywordtype">size_t</span> maxFileSize = 0, <span class="keywordtype">int</span> maxFiles = 0);</div></div><!-- fragment --><ul>
<li><code>fileName</code> - a log file name</li>
<li><code>maxFileSize</code> - the maximum log file size in bytes</li>
<li><code>maxFiles</code> - a number of log files to keep</li>
</ul>
<p>If <code>maxFileSize</code> or <code>maxFiles</code> is 0 then rolling behaviour is turned off.</p>
<p>The sample file names produced by this appender:</p>
<ul>
<li>mylog.log &lt;== current log file (size &lt; maxFileSize)</li>
<li>mylog.1.log &lt;== previous log file (size &gt;= maxFileSize)</li>
<li>mylog.2.log &lt;== previous log file (size &gt;= maxFileSize)</li>
</ul>
<p><em>Note: the lowest <code>maxFileSize</code> is 1000 bytes.</em></p>
<p><em>Note: a log file is created on the first log message.</em></p>
<h3>ConsoleAppender</h3>
<p>This appender outputs log data to <code>stdout</code>. As a template parameter it accepts <a href="#formatter">Formatter</a>.</p>
<div class="fragment"><div class="line">ConsoleAppender&lt;Formatter&gt;::ConsoleAppender();</div></div><!-- fragment --><h3>ColorConsoleAppender</h3>
<p>This appender outputs log data to <code>stdout</code> using colors that depends on a log message severity level. As a template parameter it accepts <a href="#formatter">Formatter</a>.</p>
<div class="fragment"><div class="line">ColorConsoleAppender&lt;Formatter&gt;::ColorConsoleAppender();</div></div><!-- fragment --><h3>AndroidAppender</h3>
<p><a href="#androidappender">AndroidAppender</a> uses Android logging system to output log data. It can be viewed with <a href="http://developer.android.com/tools/help/logcat.html">logcat</a> or in a log window of Android IDEs. As a template parameter this appender accepts <a href="#formatter">Formatter</a> (usually <a href="#funcmessageformatter">FuncMessageFormatter</a>).</p>
<div class="fragment"><div class="line">AndroidAppender&lt;Formatter&gt;::AndroidAppender(<span class="keyword">const</span> <span class="keywordtype">char</span>* tag);</div></div><!-- fragment --> <h3>EventLogAppender</h3>
<p>This appender outputs log data to the windows event log. It can be viewed with the windows event log viewer. As a template parameter it accepts <a href="#formatter">Formatter</a>. The constructor parameter is the event source name - typically it is the name of the application or a subcomponent of the application. It must be unique for the whole system.</p>
<div class="fragment"><div class="line">EventLogAppender&lt;Formatter&gt;::EventLogAppender(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* sourceName);</div></div><!-- fragment --><p><a href="#eventlogappender">EventLogAppender</a> must be registered in the windows registry before use (before calling the constructor). There is a helper class for that:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> EventLogAppenderRegistry::add(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* sourceName, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* logName = L<span class="stringliteral">&quot;Application&quot;</span>);</div><div class="line"><span class="keywordtype">bool</span> EventLogAppenderRegistry::exists(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* sourceName, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* logName = L<span class="stringliteral">&quot;Application&quot;</span>);</div><div class="line"><span class="keywordtype">void</span> EventLogAppenderRegistry::remove(<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* sourceName, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* logName = L<span class="stringliteral">&quot;Application&quot;</span>);</div></div><!-- fragment --><p>Registry operations are system-wide and require administrator rights. Also they are persistent so can be performed only once (when the application is installed/uninstalled).</p>
<h3>DebugOutputAppender</h3>
<p><a href="#debugoutputappender">DebugOutputAppender</a> sends log data to the debugger (works only on Windows). As a template parameter this appender accepts <a href="#formatter">Formatter</a>.</p>
<div class="fragment"><div class="line">DebugOutputAppender&lt;Formatter&gt;::DebugOutputAppender();</div></div><!-- fragment --><h1>Miscellaneous notes</h1>
<h2>Lazy stream evaluation</h2>
<p>Log messages are constructed using lazy stream evaluation. It means that if a log message will be dropped (because of its severity) then stream output operators are not executed. Thus performance penalty of unprinted log messages is negligible.</p>
<div class="fragment"><div class="line">LOGD &lt;&lt; <span class="comment">/* the following statements will be executed only when the logger severity is debug or higher */</span> ...</div></div><!-- fragment --><h2>Stream improvements over std::ostream</h2>
<p>Stream output in plog has several improvements over the standard <code>std::ostream</code>:</p>
<ul>
<li>handles wide chars/strings: <code>wchar_t</code>, <code>wchar_t*</code>, <code>std::wstring</code></li>
<li>handles <code>NULL</code> values for C-strings: <code>char*</code> and <code>wchar_t*</code></li>
<li>implicitly casts objects to: <code>std::string</code> and <code>std::wstring</code> (if they have an appropriate cast operator)</li>
<li>supports <code>QString</code> (you need to include Qt headers before plog)</li>
<li>supports managed C++ <code>System::String^</code></li>
</ul>
<h2>Automatic 'this' pointer capture</h2>
<p>'This' pointer is captured automatically to log data and can be printed by <a href="#csvformatter">CsvFormatter</a>. Unfortunately this feature is supported only on msvc 2010 and higher.</p>
<h2>Headers to include</h2>
<p>The core plog functionality is provided by inclusion of <code>plog/Log.h</code> file. Extra components require inclusion of corresponding extra headers after <code>plog/Log.h</code>.</p>
<p>![Plog core and extra components](<a href="http://gravizo.com/g?@startuml">http://gravizo.com/g?@startuml</a> ;package%20"Plog%20core\\n%28no%20additional%20include,%20just%20plog/Log.h%29"%20{;%20%20class%20TxtFormatter;%20%20class%20CsvFormatter;%20%20class%20UTF8Converter;%20%20class%20RollingFileAppender;};package%20"Plog%20extra\\n%28requires%20additional%20include%29"%20{;%20%20class%20FuncMessageFormatter;%20%20class%20ConsoleAppender;%20%20class%20ColorConsoleAppender;%20%20class%20AndroidAppender;%20%20class%20DebugOutputAppender;%20%20class%20EventLogAppender;};hide%20empty%20members;hide%20empty%20fields;)</p>
<h2>Unicode</h2>
<p>Plog is unicode aware and wide string friendly. All messages are converted to a system native char type:</p>
<ul>
<li><code>wchar_t</code> - on Windows</li>
<li><code>char</code> - on all other systems</li>
</ul>
<p>Also <code>char</code> is treated as:</p>
<ul>
<li>active code page - on Windows</li>
<li>UTF-8 - on all other systems</li>
</ul>
<p>Internally plog uses <code>nstring</code>, <code>nstringstream</code> and <code>nchar</code> ('n' for native) that are defined as:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef _WIN32</span></div><div class="line">    <span class="keyword">typedef</span> std::wstring nstring;</div><div class="line">    <span class="keyword">typedef</span> std::wstringstream nstringstream;</div><div class="line">    <span class="keyword">typedef</span> <span class="keywordtype">wchar_t</span> nchar;</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">    <span class="keyword">typedef</span> std::string nstring;</div><div class="line">    <span class="keyword">typedef</span> std::stringstream nstringstream;</div><div class="line">    <span class="keyword">typedef</span> <span class="keywordtype">char</span> nchar;</div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --><p>By default all log files are stored in UTF-8 with BOM thanks to <a href="#utf8converter">UTF8Converter</a>.</p>
<h2>Wide string support</h2>
<p>Whether <code>wchar_t</code>, <code>wchar_t*</code>, <code>std::wstring</code> can be streamed to log messages or not is controlled by <code>PLOG_ENABLE_WCHAR_INPUT</code> macro. Set it to a non-zero value to enable wide string support. By default wide string support is enabled for Windows and disabled for all non-Windows systems.</p>
<p><em>Note: wide string support requires linking to <code>iconv</code> on macOS.</em></p>
<h2>Performance</h2>
<p>Plog is not using any asynchronous techniques so it may slow down your application on large volumes of log messages.</p>
<p>Producing a single log message takes the following amount of time:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CPU  </th><th class="markdownTableHeadNone">OS  </th><th class="markdownTableHeadCenter">Time per a log call, microsec   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AMD Phenom II 1055T @3.5GHz  </td><td class="markdownTableBodyNone">Windows 2008 R2  </td><td class="markdownTableBodyCenter">12   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AMD Phenom II 1055T @3.5GHz  </td><td class="markdownTableBodyNone">Linux Mint 17.1  </td><td class="markdownTableBodyCenter">8   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Intel Core i3-3120M @2.5GHz  </td><td class="markdownTableBodyNone">Windows 2012 R2  </td><td class="markdownTableBodyCenter">25   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Intel Core i5-2500K @4.2GHz  </td><td class="markdownTableBodyNone">Windows 2008 R2  </td><td class="markdownTableBodyCenter">8   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Intel Atom N270 @1.6GHz  </td><td class="markdownTableBodyNone">Windows 2003  </td><td class="markdownTableBodyCenter">68   </td></tr>
</table>
<p>Assume 20 microsec per a log call then 500 log calls per a second will slow down an application by 1%. It is acceptable for the most use cases.</p>
<p><em>Refer to <a href="samples/Performance">Performance</a> for a complete sample.</em></p>
<h2>Printf style formatting</h2>
<p>With the help of <a href="https://github.com/fmtlib/fmt">fmtlib</a> printf style formatting can be used in plog:</p>
<div class="fragment"><div class="line">LOGI &lt;&lt; fmt::sprintf(<span class="stringliteral">&quot;%d %s&quot;</span>, 10, <span class="stringliteral">&quot;test&quot;</span>);</div><div class="line">LOGI &lt;&lt; fmt::format(<span class="stringliteral">&quot;{0} {1}&quot;</span>, 12, <span class="stringliteral">&quot;test&quot;</span>);</div></div><!-- fragment --><h1>Extending</h1>
<p>Plog can be easily extended to support new:</p>
<ul>
<li><a href="#custom-data-type">custom data type</a></li>
<li><a href="#custom-appender">custom appender</a></li>
<li><a href="#custom-formatter">custom formatter</a></li>
<li><a href="#custom-converter">custom converter</a></li>
</ul>
<h2>Custom data type</h2>
<p>To output a custom data type to a log message implement the following function:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>plog</div><div class="line">{</div><div class="line">    Record&amp; operator&lt;&lt;(Record&amp; record, <span class="keyword">const</span> MyType&amp; t);</div><div class="line">}</div></div><!-- fragment --><p><em>Refer to <a href="samples/CustomType">CustomType</a> for a complete sample.</em></p>
<h2>Custom appender</h2>
<p>A custom appender must implement <code>IAppender</code> interface. Also it may accept <a href="#formatter">Formatter</a> and <a href="#converter">Converter</a> as template parameters however this is optional.</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>plog</div><div class="line">{</div><div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">class</span> Formatter&gt;</div><div class="line">    <span class="keyword">class </span>MyAppender : <span class="keyword">public</span> IAppender</div><div class="line">    {</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">virtual</span> <span class="keywordtype">void</span> write(<span class="keyword">const</span> Record&amp; record);</div><div class="line">    };</div><div class="line">}</div></div><!-- fragment --><p><em>Refer to <a href="samples/CustomAppender">CustomAppender</a> for a complete sample.</em></p>
<h2>Custom formatter</h2>
<p>A formatter that is compatible with existing appenders must be a class with 2 static methods:</p>
<ul>
<li><code>header</code> - returns a header for a new log</li>
<li><code>format</code> - formats <a href="#record">Record</a> to a string</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>plog</div><div class="line">{</div><div class="line">    <span class="keyword">class </span>MyFormatter</div><div class="line">    {</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">static</span> util::nstring header();</div><div class="line">        <span class="keyword">static</span> util::nstring format(<span class="keyword">const</span> Record&amp; record);</div><div class="line">    };</div><div class="line">}</div></div><!-- fragment --><p><em>Refer to <a href="samples/CustomFormatter">CustomFormatter</a> for a complete sample.</em></p>
<h2>Custom converter</h2>
<p>A converter must be a class with 2 static methods:</p>
<ul>
<li><code>header</code> - converts a header for a new log</li>
<li><code>convert</code> - converts log messages</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">namespace </span>plog</div><div class="line">{</div><div class="line">    <span class="keyword">class </span>MyConverter</div><div class="line">    {</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">static</span> std::string header(<span class="keyword">const</span> util::nstring&amp; str);</div><div class="line">        <span class="keyword">static</span> std::string convert(<span class="keyword">const</span> util::nstring&amp; str);</div><div class="line">    };</div><div class="line">}</div></div><!-- fragment --><p><em>Refer to <a href="samples/CustomConverter">CustomConverter</a> for a complete sample.</em></p>
<h1>Samples</h1>
<p>There are a number of samples that demonstrate various aspects of using plog. They can be found in the [samples](samples) folder:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Sample  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/Android">Android</a>  </td><td class="markdownTableBodyNone">Shows how to use <a href="#androidappender">AndroidAppender</a>.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/Chained">Chained</a>  </td><td class="markdownTableBodyNone">Shows how to chain a logger in a shared library with the main logger (route messages).   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/ColorConsole">ColorConsole</a>  </td><td class="markdownTableBodyNone">Shows how to use <a href="#colorconsoleappender">ColorConsoleAppender</a>.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/CustomAppender">CustomAppender</a>  </td><td class="markdownTableBodyNone">Shows how to implement a custom appender that stores log messages in memory.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/CustomFormatter">CustomFormatter</a>  </td><td class="markdownTableBodyNone">Shows how to implement a custom formatter.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/CustomConverter">CustomConverter</a>  </td><td class="markdownTableBodyNone">Shows how to implement a custom converter that encrypts log messages.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/CustomType">CustomType</a>  </td><td class="markdownTableBodyNone">Shows how to print a custom type to the log stream.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/DebugOutput">DebugOutput</a>  </td><td class="markdownTableBodyNone">Shows how to use <a href="#debugoutputappender">DebugOutputAppender</a> to write to the windows debug output.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/Demo">Demo</a>  </td><td class="markdownTableBodyNone">Demonstrates log stream abilities, prints various types of messages.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/EventLog">EventLog</a>  </td><td class="markdownTableBodyNone">Shows how to use <a href="#eventlogappender">EventLogAppender</a> to write to the windows event log.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/Facilities">Facilities</a>  </td><td class="markdownTableBodyNone">Shows how to use logging per facilities via multiple logger instances (useful for big projects).   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/Hello">Hello</a>  </td><td class="markdownTableBodyNone">A minimal introduction sample, shows the basic 3 steps to start using plog.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/Library">Library</a>  </td><td class="markdownTableBodyNone">Shows plog usage in static libraries.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/MultiAppender">MultiAppender</a>  </td><td class="markdownTableBodyNone">Shows how to use multiple appenders with the same logger.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/MultiInstance">MultiInstance</a>  </td><td class="markdownTableBodyNone">Shows how to use multiple logger instances, each instance has its own independent configuration.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/NativeEOL">NativeEOL</a>  </td><td class="markdownTableBodyNone">Shows how to use <a href="#nativeeolconverter">NativeEOLConverter</a>.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="samples/ObjectiveC">ObjectiveC</a>  </td><td class="markdownTableBodyNone">Shows that plog can be used in ObjectiveC++.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="samples/Performance">Performance</a>  </td><td class="markdownTableBodyNone">Measures time per a log call.   </td></tr>
</table>
<h1>References</h1>
<h2>Competing C++ log libraries</h2>
<ul>
<li><a href="http://www.boost.org/doc/libs/release/libs/log/">Boost::Log</a></li>
<li><a href="https://github.com/easylogging/easyloggingpp">EasyLogging++</a></li>
<li><a href="http://www.codeproject.com/Articles/288827/g-log-An-efficient-asynchronous-logger-using-Cplus">g2log</a></li>
<li><a href="https://github.com/KjellKod/g3log">g3log</a></li>
<li><a href="https://code.google.com/p/google-glog/">glog</a></li>
<li><a href="http://sourceforge.net/projects/log4cplus/">Log4cplus</a></li>
<li><a href="http://log4cpp.sourceforge.net/">Log4cpp</a></li>
<li><a href="http://logging.apache.org/log4cxx/">Log4cxx</a></li>
<li><a href="http://pantheios.sourceforge.net/">Pantheios</a></li>
<li><a href="https://github.com/gabime/spdlog/">spdlog</a></li>
<li><a href="https://github.com/mattiasflodin/reckless">reckless</a></li>
<li><a href="https://github.com/emilk/loguru">loguru</a></li>
<li><a href="https://github.com/3Hren/blackhole">blackhole</a></li>
</ul>
<h2>Tools and useful info</h2>
<ul>
<li><a href="https://msdn.microsoft.com/en-us/library/x7wy9xh3.aspx">__if_exists Statement</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/CppRuntimeEnv/Articles/SymbolVisibility.html">Controlling Symbol Visibility</a></li>
<li><a href="http://gravizo.com">Gravizo</a></li>
<li><a href="http://plantuml.sourceforge.net">PlantUML</a></li>
<li><a href="https://github.com/thlorenz/doctoc">DocToc</a></li>
<li><a href="http://www.cmake.org">CMake</a></li>
</ul>
<h1>License</h1>
<p>Plog is licensed under the <a href="http://mozilla.org/MPL/2.0/">MPL version 2.0</a>. You can freely use it in your commercial or opensource software.</p>
<h1>Version history</h1>
<h2>Version 1.1.5 (TBD)</h2>
<h2>Version 1.1.4 (26 Mar 2018)</h2>
<ul>
<li>New: Add <code>-Wundef</code> support</li>
<li>New #87: Add <a href="https://www.rtems.org">RTEMS</a> support</li>
<li>New #84: Add Intel C++ Compiler support</li>
<li>New #83: Add FreeBSD support</li>
<li>New #79: Add <code>-Wnon-virtual-dtor</code> support</li>
<li>New #66: Support ostream operator&lt;&lt; on windows as well as wostream</li>
<li>Fix #68: Fix compilation for Android</li>
<li>Fix: Fix compiling with cmake 2.8</li>
</ul>
<h2>Version 1.1.3 (09 Aug 2017)</h2>
<ul>
<li>New: Introduce <code>PLOG_ENABLE_WCHAR_INPUT</code> macro to control wide string support</li>
<li>New #63: Add support for managed C++ <code>System::String^</code></li>
<li>New #61: Add missing macros for logging with severity NONE</li>
<li>Fix #59: Unable to build <a href="#nativeeolconverter">NativeEOLConverter</a>/<a href="#utf8converter">UTF8Converter</a> using Visual Studio</li>
<li>Fix #58: Use WriteConsoleW instead of global setlocale for writing unicode into windows console</li>
<li>Fix #55: Mention about linking to <code>iconv</code> on macOS</li>
<li>Fix: <code>IF_LOG</code> macro didn't work for curly braces blocks</li>
</ul>
<h2>Version 1.1.2 (02 May 2017)</h2>
<ul>
<li>New: Add <a href="#nativeeolconverter">NativeEOLConverter</a></li>
<li>New: Add <a href="#messageonlyformatter">MessageOnlyFormatter</a></li>
<li>New: Slightly increase log performance on Windows (about 9%).</li>
</ul>
<h2>Version 1.1.1 (17 Apr 2017)</h2>
<ul>
<li>Fix #47: Update includes</li>
<li>Fix #45, #13: Get rid of <code>windows.h</code> dependency</li>
<li>Fix #40: Signed unsigned assignment warning</li>
<li>Fix #39: Build warning on macOS 10.12 Sierra</li>
<li>New #36: Ability to check whether event log registry entry exists</li>
</ul>
<h2>Version 1.1.0 (20 Nov 2016)</h2>
<ul>
<li>Fix #34: Introduce binary compatible interface to Record (WARNING: this is not compatible with 1.0.x version in <a href="#chained-loggers">Chained mode</a>, so don't mix 1.1.x and 1.0.x)</li>
</ul>
<h2>Version 1.0.2 (19 Nov 2016)</h2>
<ul>
<li>New #11: Default instance can be set via <code>PLOG_DEFAULT_INSTANCE</code></li>
<li>New #30: Support for <code>QString</code></li>
<li>New: Support for C++Builder</li>
<li>New #15: <code>severityFromString</code> function</li>
<li>New #21: Capture source file name (disabled by default)</li>
<li>New #33: Add <a href="#debugoutputappender">DebugOutputAppender</a></li>
<li>New #32: Add <a href="#eventlogappender">EventLogAppender</a></li>
<li>Fix #12: Crash on processing Obj-C function name</li>
<li>Fix #17: Compatibility with <a href="http://www.mingw.org/">MinGW</a></li>
<li>Fix #27: <code>IF_LOG_</code> macro in if/else leads to miss else branch</li>
<li>Fix #18, #29: Thread safety for <a href="#consoleappender">ConsoleAppender</a>/<a href="#colorconsoleappender">ColorConsoleAppender</a></li>
<li>Fix #31: Support for stream manipulators like std::endl</li>
<li>Fix: Compatibility with old Visual Studio versions</li>
</ul>
<h2>Version 1.0.1 (01 Nov 2015)</h2>
<ul>
<li>New: Add <a href="#colorconsoleappender">ColorConsoleAppender</a></li>
<li>Fix #6: Compatibility with <a href="http://mingw-w64.org/">Mingw-w64</a></li>
<li>Fix #7: Log file not created if file name contains Unicode characters in Windows</li>
<li>Fix #4: Flush stdout</li>
<li>Fix #3: IntelliSense error: expected an identifier</li>
</ul>
<h2>Version 1.0.0 (19 May 2015)</h2>
<ul>
<li>Initial public release </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
